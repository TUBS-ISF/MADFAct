package de.tu_bs.isf.madfa.test;

import java.util.ArrayList;
import java.util.List;
import java.util.Set;

import de.tu_bs.isf.madfa.algorithms.implement.AlgorithmD;
import de.tu_bs.isf.madfa.algorithms.implement.AlgorithmI;
import de.tu_bs.isf.madfa.algorithms.implement.AlgorithmN;
import de.tu_bs.isf.madfa.algorithms.implement.AlgorithmR;
import de.tu_bs.isf.madfa.algorithms.implement.AlgorithmS;
import de.tu_bs.isf.madfa.algorithms.implement.AlgorithmT;
import de.tu_bs.isf.madfa.algorithms.implement.AlgorithmW;
import de.tu_bs.isf.madfa.algorithms.skeleton.AlgorithmSPL;
import de.tu_bs.isf.madfa.algorithms.skeleton.AlgorithmSPL.AlgorithmSelection;
import de.tu_bs.isf.madfa.algorithms.skeleton.AlgorithmSkeleton;
import de.tu_bs.isf.madfa.algorithms.spl.AlgorithmSPL_D;
import de.tu_bs.isf.madfa.algorithms.spl.AlgorithmSPL_I;
import de.tu_bs.isf.madfa.algorithms.spl.AlgorithmSPL_N;
import de.tu_bs.isf.madfa.algorithms.spl.AlgorithmSPL_R;
import de.tu_bs.isf.madfa.algorithms.spl.AlgorithmSPL_S;
import de.tu_bs.isf.madfa.algorithms.spl.AlgorithmSPL_T;
import de.tu_bs.isf.madfa.algorithms.spl.AlgorithmSPL_W;
import de.tu_bs.isf.madfa.automaton.Automaton;
import de.tu_bs.isf.madfa.benchmark.Benchmark;
import de.tu_bs.isf.madfa.benchmark.RuntimeMap;
import de.tu_bs.isf.madfa.multithreading.Multithreading;
import de.tu_bs.isf.madfa.util.Util;

/**
 * Class to test the program
 * @author Tobias
 *
 */
public class TestClass {

	/**
	 * main method
	 * @param args not used
	 */
	public static void main(String[] args) {
		Benchmark.benchmark();
		
		AlgorithmSkeleton algo = new AlgorithmSPL_T();
		Multithreading multi = new Multithreading(algo, 4);
		
		
		List<String> words = new ArrayList<>();
		words = Benchmark.readBible();
//		words = Benchmark.readWordList();
//		words = Benchmark.readEcoliSameLength(64, 128);
//		words = Benchmark.readEcoliDifferentLength(256);
//		words = Util.orderWords(words); //needed for Algorithm S
//		words = Util.orderWordsMinLen(words); //needed for Algorithm D and W

		
		long timeNano = System.nanoTime();
		
		Automaton aut = algo.createMadfa(words); //standard execution
//		Automaton aut = multi.createMadfa(words); //multithreaded execution
		
		System.out.println((System.nanoTime() - timeNano) / 1000000 + " ms");
		
		List<String> acceptedWords = Util.rightLanguageOfState(aut.getStartState());
		
		System.out.println("Size of input words: " + words.size());
		System.out.println("States of automaton: " + aut.getStates().size());
		System.out.println("Final states of automaton: " + aut.getFinalStates().size());
		System.out.println("Transitions of automaton: " + aut.getTransitions().size());
		System.out.println("Size of accepted words: " + acceptedWords.size());
		System.out.println("Accepted word equivalent?: " + Util.wordSetsAreEquivalence(acceptedWords, words));
		System.out.println("Is minimal?: " + Util.inequivalentStates(aut.getStates()));
		
		System.out.println("end");
	}

}
